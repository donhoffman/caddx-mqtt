TODO:
-  Be sure to clear security stuff from DockerFile before publish to github and pypi

# pynx584mqtt

- Essentially a fork of pynx584
 
- Adds mqtt support for reduced zone and partition latency
- Allows for optional mqtt client

- Typical use case is for a NX/Caddx alarm connected to MQTT mosquitto broker
- This allows connect to Home Assistant


# Quick start:
# NOTE: Also, should be okay for conversions from pynx584
pip install nx584mqtt


Replace alarm and binary sensors with this new mqtt template:

Note: Previous binary sensors were autonamed from zones, and now would require patience and diligence to reproduce. Zone names and details are all published to the mqtt server, so I suggest using a mqtt explorer to examine your published names and zones numbers to recreate, if desired

>> Include HA Config:



-------------
Improvements:

- Greatly reduced latency for zone and alarm status changes
- Allows for update of alarm time on user request (not just at startup)
- Enhanced security protocol options
- User access to zone and partition flags
- Heartbeat to verify alarm connection is still active


-------------
Commands:

- Write to mqtt <command topic> with value:

'disarm,<part>,<code>'
>> Disarms partition <part> using code <code>

'arm_home,<part>'
>> Arms home partition <part>

'arm_away,<partn>'
>> Arms away partition <part>

'time' 
>> Update alarm time from local time of nx584mqtt server

'status' 
>> Update mqtt status of all fields (dev only)

'nop' 
>> No action, clears command after disarm to reduce code visibility

 
-------------
FUTURE:

- Alter defaults to HA, if needed or desired
- Improve startup
- Test MQTT last will and disconnection/reconnection when MQTT server goes offline

-------------
Known Issues:

- At startup, the alarm requests details on all the zones, so it takes about 5 secs per zone
- Therefore zones may toggle at startup (future fix)

- nx584_client continues to use the HTTP connection method, so server port connect from the client host must be available

BREAKING CHANGE:

- Previously, the logs for HTTP connections were always logged to console, and now require log level INFO (not-default)





# I pledge to 
- Help when others ask for it, especially if I know how to help.
- Not ask users to manage overly complex software installs to get implement basic functionality.
- Not deny requests, repeated over years and from multiple fellow users, for software that costs me nothing to share. 
- Support projects that listen to user's needs and provide a open forum for how the software lives for all of us.
- Not create public open source improvements, and not share, but rather demand others reproduce it on their own. After all, I have never examined or learned from previous examples of software, every line of code I have produced is solely my creation and is not available for public review. :)-


